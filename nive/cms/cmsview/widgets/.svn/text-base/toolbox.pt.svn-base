<div tal:define="page python:obj.GetPage(); 
                 pageUrl python:view.FolderUrl(page);
                 static view.StaticUrl('Poolyx.cms.cmsview:static/images/');
                 elementContainer python:obj.GetElementContainer();"
     id="poolyx_toolbox"
     i18n:domain="poolyx">
  <div id="toolbox_header">
    <img class="toggle" id="toolbox_toggle" title="toggle toolbox" 
         src="${static}toggle.png" i18n:attributes="title" />
    <h1>Poolyx <span i18n:translate="">toolbox</span></h1>
  </div>
  <div id="toolbox_contents">
    <!--IObject-->
    <!--IPage-->
    <span tal:replace="structure view.insertPageWidgets()"/>
    <!--IApplication-->
    <span tal:replace="structure view.insertAppWidgets()"/>
  </div>
</div>
<script>
$(function() {
   if($.cookie("toolboxY")!=null) $('#poolyx_toolbox').css({ top: $.cookie("toolboxY")*1, left: $.cookie("toolboxX")*1 });
   if($.cookie("toolboxD")=='none') $('#toolbox_contents').css('display','none');
   $('#toolbox_toggle').click(function () { c=$('#toolbox_contents'); c.toggle(); $.cookie("toolboxD", c.css('display'), { path: '/' }); } );
   $('#poolyx_toolbox').draggable({handle:'h1', containment: 'document',
     stop: function (event, ui) {
         $.cookie("toolboxY", ui.position.top, { path: '/' });
         $.cookie("toolboxX", ui.position.left, { path: '/' });
     } 
  });
});
  
$(document).ready(function(){
  $.poolyxOverlay();
});
</script>
