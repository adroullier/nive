<div class="pageelement peImage" 
     id="pe${context.GetID()}"
     tal:define="css context.data.cssClass" i18n:domain="poolyx">

<tal:block tal:condition="css not in (u'teaser',u'teasers',u'header')">
<div class="${css} thumb">
  <a tal:condition="context.files.get('imagefull') and context.files.get('image')" 
     tal:attributes="href view.FileUrl('imagefull', context);"
     rel="thumbnail">
    <img tal:attributes="src view.FileUrl('image', context); title context.GetTitle()" />
  </a>
  <img tal:condition="context.files.get('image') and not context.files.get('imagefull')"
       tal:attributes="src view.FileUrl('image', context); title context.GetTitle()" />
  <div class="title" tal:content="structure context.GetTitle()"/>
</div>
<p tal:condition="context.data.textblock" tal:replace="structure context.data.textblock"></p>
<a tal:condition="context.data.link" 
   tal:attributes="href view.ResolveLink(context.data.link)" 
   i18n:translate="">&gt; more</a>
</tal:block>

<tal:block tal:condition="css == u'teaser'">
<div class="teaser">
<img tal:condition="context.files.get('image')"
     tal:attributes="src view.FileUrl('image', context); title context.GetTitle()" />
<div class="itext">
<h3 tal:content="structure context.GetTitle()"/>
<p tal:condition="context.data.textblock" tal:replace="structure context.data.textblock"></p>
<a tal:condition="context.data.link" 
   tal:attributes="href view.ResolveLink(context.data.link)" 
   i18n:translate="">&gt; more</a>
</div>
</div>
</tal:block>

<tal:block tal:condition="css == u'teasers'">
<div class="teaser_s">
<img tal:condition="context.files.get('image')"
     tal:attributes="src view.FileUrl('image', context); title context.GetTitle()" />
<div class="itext">
<h3 tal:content="structure context.GetTitle()"/>
<p tal:condition="context.data.textblock" tal:replace="structure context.data.textblock"></p>
<a tal:condition="context.data.link" 
   tal:attributes="href view.ResolveLink(context.data.link)"
   i18n:translate="">&gt; more</a>
</div>
</div>
</tal:block>

<tal:block tal:condition="css == u'header'">
<div class="header" style="background-image:url('${view.FileUrl('image', context)}')">
<div class="itext">
<h3 tal:condition="context.GetTitle()" tal:content="structure context.GetTitle()"/>
<p tal:condition="context.data.textblock" tal:content="structure context.data.textblock"></p>
<a tal:condition="context.data.link" 
   tal:attributes="href view.ResolveLink(context.data.link)"
   i18n:translate="">&gt; more</a>
</div>
</div>
</tal:block>

</div>
